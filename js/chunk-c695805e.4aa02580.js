(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c695805e"],{2532:function(e,n,i){"use strict";var a=i("23e7"),t=i("5a34"),s=i("1d80"),r=i("ab13");a({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(s(this)).indexOf(t(e),arguments.length>1?arguments[1]:void 0)}})},"37d8":function(e,n,i){},"44e7":function(e,n,i){var a=i("861d"),t=i("c6b6"),s=i("b622"),r=s("match");e.exports=function(e){var n;return a(e)&&(void 0!==(n=e[r])?!!n:"RegExp"==t(e))}},"5a34":function(e,n,i){var a=i("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},"81b8":function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"recordVote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"issueId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"response"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"licence"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"state"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"surname"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recordVote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"issueId"},value:{kind:"Variable",name:{kind:"Name",value:"issueId"}}},{kind:"Argument",name:{kind:"Name",value:"response"},value:{kind:"Variable",name:{kind:"Name",value:"response"}}},{kind:"Argument",name:{kind:"Name",value:"licence"},value:{kind:"Variable",name:{kind:"Name",value:"licence"}}},{kind:"Argument",name:{kind:"Name",value:"state"},value:{kind:"Variable",name:{kind:"Name",value:"state"}}},{kind:"Argument",name:{kind:"Name",value:"surname"},value:{kind:"Variable",name:{kind:"Name",value:"surname"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:259}};i.loc.source={body:"query recordVote ($issueId: Int!, $response: String!, $licence: String!, $state: String!, $surname: String!) {\n    recordVote (issueId: $issueId, response: $response, licence: $licence, state: $state, surname: $surname) {\n        message\n        error\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){a(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){a(e,n)})),e.definitions&&e.definitions.forEach((function(e){a(e,n)}))}var t={};function s(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}function r(e,n){var i={kind:e.kind,definitions:[s(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=t[n]||new Set,r=new Set,o=new Set;a.forEach((function(e){o.add(e)}));while(o.size>0){var d=o;o=new Set,d.forEach((function(e){if(!r.has(e)){r.add(e);var n=t[e]||new Set;n.forEach((function(e){o.add(e)}))}}))}return r.forEach((function(n){var a=s(e,n);a&&i.definitions.push(a)})),i}(function(){i.definitions.forEach((function(e){if(e.name){var n=new Set;a(e,n),t[e.name.value]=n}}))})(),e.exports=i,e.exports["recordVote"]=r(i,"recordVote")},9883:function(e,n,i){"use strict";i.r(n);var a=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{attrs:{id:"issue-vote"}},[i("div",{staticClass:"section"},[i("router-link",{staticClass:"button is-outlined is-pulled-right",attrs:{to:{name:"issue",params:{issue:e.$route.params.issue}}}},[e._v("Back")]),i("p",{staticClass:"title"},[e._v(e._s(e.issue.question))]),e.response?i("div",{staticClass:"container"},[i("p",[e._v("Please confirm a vote of: "),i("em",[e._v(e._s(e.response))])]),i("button",{staticClass:"button",attrs:{name:"confirm"},on:{click:e.confirmVote}},[e._v("Confirm")]),i("button",{staticClass:"button",attrs:{name:"change"},on:{click:e.confirmVote}},[e._v("Change")]),e.err?i("p",[e._v(e._s(e.err))]):e._e()]):e.identified?i("div",{staticClass:"level"},[i("div",{staticClass:"level-item"},[i("button",{staticClass:"has-background-primary button",attrs:{name:"for"},on:{click:e.chooseVote}},[e._v("For")])]),i("div",{staticClass:"level-item"},[i("button",{staticClass:"has-background-primary button",attrs:{name:"against"},on:{click:e.chooseVote}},[e._v("Against")])])]):i("div",{staticClass:"notification"},[i("p",{staticClass:"subtitle"},[e._v("Please reconfirm your details before voting")]),i("login-form",{on:{loginSubmit:e.loginSubmit}}),e.err?i("p",[e._v(e._s(e.err))]):e._e()],1)],1)])},t=[],s=(i("caad"),i("b0c0"),i("2532"),i("61b1")),r=i("dfcb"),o=i.n(r),d=i("81b8"),u=i.n(d),c={name:"issue-vote",data:function(){return{identified:!1,response:"",err:"",data:""}},methods:{loginSubmit:function(e){this.data=e,e.alreadyVoted.includes(this.$route.params.issue)?this.err="You've already voted":this.identified=!0},chooseVote:function(e){this.response=e.target.name},confirmVote:function(e){var n=this;"change"===e.target.name?this.response="":"confirm"===e.target.name&&this.$apollo.query({query:u.a,variables:{issueId:this.$route.params.issue,response:this.response,licence:this.data.licence,state:this.data.state,surname:this.data.surname}}).then((function(e){var i=e.data.recordVote;i.error?n.err=i.error:n.$router.push("/")}))}},components:{"login-form":s["a"]},apollo:{issue:{query:o.a,variables:function(){return{issueId:this.$route.params.issue}}}}},l=c,m=(i("eb87"),i("2877")),v=Object(m["a"])(l,a,t,!1,null,"70a5cb90",null);n["default"]=v.exports},ab13:function(e,n,i){var a=i("b622"),t=a("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(i){try{return n[t]=!1,"/./"[e](n)}catch(a){}}return!1}},b0c0:function(e,n,i){var a=i("83ab"),t=i("9bf2").f,s=Function.prototype,r=s.toString,o=/^\s*function ([^ (]*)/,d="name";a&&!(d in s)&&t(s,d,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(e){return""}}})},caad:function(e,n,i){"use strict";var a=i("23e7"),t=i("4d64").includes,s=i("44d2"),r=i("ae40"),o=r("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!o},{includes:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},dfcb:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"issueId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"issue"},name:{kind:"Name",value:"getIssue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"issueId"},value:{kind:"Variable",name:{kind:"Name",value:"issueId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"question"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"caseFor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"caseAgainst"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"closeDate"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:151}};i.loc.source={body:"\nquery getIssue ($issueId: Int!) {\n    issue: getIssue(issueId: $issueId) {\n\t\tissueId\n\t\tquestion\n\t\tdescription\n\t\tcaseFor\n\t\tcaseAgainst\n\t\tcloseDate\n\t}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){a(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){a(e,n)})),e.definitions&&e.definitions.forEach((function(e){a(e,n)}))}var t={};function s(e,n){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==n)return a}}function r(e,n){var i={kind:e.kind,definitions:[s(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=t[n]||new Set,r=new Set,o=new Set;a.forEach((function(e){o.add(e)}));while(o.size>0){var d=o;o=new Set,d.forEach((function(e){if(!r.has(e)){r.add(e);var n=t[e]||new Set;n.forEach((function(e){o.add(e)}))}}))}return r.forEach((function(n){var a=s(e,n);a&&i.definitions.push(a)})),i}(function(){i.definitions.forEach((function(e){if(e.name){var n=new Set;a(e,n),t[e.name.value]=n}}))})(),e.exports=i,e.exports["getIssue"]=r(i,"getIssue")},eb87:function(e,n,i){"use strict";var a=i("37d8"),t=i.n(a);t.a}}]);
//# sourceMappingURL=chunk-c695805e.4aa02580.js.map